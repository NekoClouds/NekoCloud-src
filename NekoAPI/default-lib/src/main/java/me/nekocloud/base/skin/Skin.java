package me.nekocloud.base.skin;

import lombok.AllArgsConstructor;
import lombok.EqualsAndHashCode;
import lombok.Getter;
import lombok.ToString;
import org.jetbrains.annotations.NotNull;

import javax.annotation.Nullable;
import java.util.concurrent.TimeUnit;

@AllArgsConstructor
@Getter
@EqualsAndHashCode
@ToString
public class Skin {

    public static final Skin SKIN_REWARD = createSkin("eyJ0aW1lc3RhbXAiOjE1Mjc2MTU5MDAyMjUsInByb2ZpbGVJZCI6IjQxM2NkYjhjYjVlZDRlN2M4ODVhMTk0NDBlYWRjZTA2IiwicHJvZmlsZU5hbWUiOiJiYXp6ZXJzcHVkIiwic2lnbmF0dXJlUmVxdWlyZWQiOnRydWUsInRleHR1cmVzIjp7IlNLSU4iOnsidXJsIjoiaHR0cDovL3RleHR1cmVzLm1pbmVjcmFmdC5uZXQvdGV4dHVyZS82NGNhNjgxMWY2ODU1OGYzZWRlNDQzZWYwZmE1MmIwOTExYTI1ZGI0MmM2NTQzZmQwNWM5OGI0YWQ4NTA1YmU2In19fQ==", "iGtCyfp0wdPQCAbR7NlMbOr2JzNrNgqYdsUXl9b54MIU5jQuSIzJKDSbVGDMD0obyFUSeVf82f6o9OQSHcKR2UK1uVCaN1Xobi5WWZSfoIlAObsB+8QHdhPd31VdyaAJITo2q3AZwqk/NChWEzcy5Ya2/RIzosFMiPk3dvcaiw3Y7XHSxT2RfzLO06fupAZF0PeuHHDERN4uxWRZdWlKGetJTkkE9aYxdpPqfNiEA1Yy0qnyc43QcNYh+DDIN5lPAQQl9eG/djexJVv/dbCxhK+N6pafztBf+5yugR8Cnsmx5V33qtrKMYrF+arTGHDVJW8D7/zcq0JnSt878z0lxxivf33KygNxS0JyTuapsyM8MuhCq+Ql3J1Hzz0lOFrgxNcoCNtCoEyjfmcmWjCb/sCHsLqemmzezNvpBXUijT7DnQcW+PYurGCqHsxtisbETmX73a6PkAzi652bWiUkiXzD5Eb34JrENJjpHipEAQJ5m7COJDoSBUy2asqrML3eZYRGBemWEB1H0aPZGWAJ3sZ5w7iWKUC8gig6k8anTha25ygs86vyCVgbDyLbQr/So92FTIPoYJWxW2q3H/jN/vB0QCtBcRUk7vAM65PzI328ibEjj54v3rRWIBH6J7eTK+jY3jFSj0y6d+i9/3ESUijC+e2VakZB7HlQxN62C6k=");
    public static final Skin SKIN_SHOP = createSkin( "eyJ0aW1lc3RhbXAiOjE1MDc2MTQ2Nzc1OTAsInByb2ZpbGVJZCI6IjdkYTJhYjNhOTNjYTQ4ZWU4MzA0OGFmYzNiODBlNjhlIiwicHJvZmlsZU5hbWUiOiJHb2xkYXBmZWwiLCJzaWduYXR1cmVSZXF1aXJlZCI6dHJ1ZSwidGV4dHVyZXMiOnsiU0tJTiI6eyJ1cmwiOiJodHRwOi8vdGV4dHVyZXMubWluZWNyYWZ0Lm5ldC90ZXh0dXJlL2E4OGE3ZWI3NTM3ZTVhZjk1YjQwYjY0NzM0MjExMjM0OWIzMjc5ZGExZGRkMzQxZjhhYjlhMzhkZTg1ODIyIn19fQ==", "jOdY+Q9nX7YIspeP2EcHv13hhVXYEIq8XMoSnWzM/BnAuFa/AlgoyJ79T7sATyfcXYLgnRz1rI9chxTNP89YKWOayFAhEPLWEHE4qmkd2kxdeg8WPM8wQmRnveByz2i2N9C3HU7KFPuylvceKj4h3zFQ6g6KfcltlnL9yluJgNSc5drWOROAKCnjwb5MPYIS4C6QT1/r3FF3rkXMZCSc8Xx74zNevcgZMcGITkkE6HIGBwuQmpS00lm2l5D2LmthTDVwzWq/6U9ufT0MLRylXhEyUs8m+7fRu32kN0Yr7x2XaEvjgp0bAeesz7VH6Xjzw1fbZZFqGYP8WeRO0+czgrNitBc1icJi88NFOhCyvjwqw7Uf9EdqE3SzRda9XhiHAYqv0xMXVifZvkMLOAbRJa6mbjzPdGdiiFk0lFdlJ3+ZrcIU9K5/Gg3FMruS8ot6JhkpJizim+/p6EWM+z+fZ3JElzHM2AX6npUn/2fmOyfbUQrqope3GwXCZZ344Bpo4dkX7PAvov/8EHKMnhKTsncxHWLD8hfIHSYd3Bm1hSVBi1T5jcmQKkh4yejwZnynWp8t5hfcmt2AySs37HBAwJx9l/zfkfNjAmCK+e9XpJ7p1JKo6xDRQFQwzt+d1qUMf0TYv3OzK2akq8y6ApD5HQmbefLBIUAJ4MnAAJg2F18=");
    public static final Skin SKIN_SPECTATOR = createSkin("eyJ0aW1lc3RhbXAiOjE1MDc2MTM5NzI2NDUsInByb2ZpbGVJZCI6ImUzYjQ0NWM4NDdmNTQ4ZmI4YzhmYTNmMWY3ZWZiYThlIiwicHJvZmlsZU5hbWUiOiJNaW5pRGlnZ2VyVGVzdCIsInNpZ25hdHVyZVJlcXVpcmVkIjp0cnVlLCJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGUyYjUwYzI4NDQ1YmQyOWE2OGRmZTIyM2M0YzlmZDYyZTYyOWNkNWU1ZDdjMTc3NzIwNmU4YjRkNjMxIn19fQ==", "gza3eHED3BMmxRjZmDDUQQliH10Q4e8U5uKNv0RaGfOKdPOxMToH2rqSpyNeS+odXQvAq6cDZulKk5LZgcs89kpv+Jkb3sfWdUb6HnJvqkeA+4iTw3n9BxRZpoC0lyBmiJSQPlSwywgjmd9cybGPtgX3+WpbExRDYy90X8ii3iN9dlFlNWFiInNZjBUUjslcqnD8VEkItonJwNbPbXkgvHu0qmiBon6bWmnI81cO0DekrxOGAbQQynNosnGVbV7oGTAtN87G9zM7McNvMXK+1BJqAxdqad3U2Jfnu3PHDZ1pDCJIA+5yQiiTblQPzYx9Fp73E2NpS51239/P5B0bWOa8MWGK2fKCznxRy/lZTd/3Ewojxu9guWann0ALLeYyvXA/FDY1vY6clRF50JyhgBR6Tf58lOF8kkq964gdpYlhtldI1ZWf8jn/inK//b3rNmqu046oKQLuhYjxVNoV4lrzzb+pzjjKx2/iBXqzxnWTjrTLZv6n6jLS9aFghryaLbUXc4IETj+MsZ5Z9WdPCG02V3f3Z+5aFZfMg2zkj1qQxDVhrdJr/87lE23ZupYDV1szocx39JF1gtwbKhTugVKlDV4UQZHokFdcFRtMLSpX7zJwNLiVK/+aMN1YbGQzdwII9CFXN2DtgawzTnQQafEBwNiyp3GAcPTE9VqffFY=");

    public static final Skin DEFAULT_SKIN = createSkin("ewogICJ0aW1lc3RhbXAiIDogMTY0MjE3NTA1MDA2MSwKICAicHJvZmlsZUlkIiA6ICIxNzU1N2FjNTEzMWE0YTUzODAwODg3Y2E4ZTQ4YWQyNSIsCiAgInByb2ZpbGVOYW1lIiA6ICJQZW50YXRpbCIsCiAgInNpZ25hdHVyZVJlcXVpcmVkIiA6IHRydWUsCiAgInRleHR1cmVzIiA6IHsKICAgICJTS0lOIiA6IHsKICAgICAgInVybCIgOiAiaHR0cDovL3RleHR1cmVzLm1pbmVjcmFmdC5uZXQvdGV4dHVyZS83YWZlYmViNjBiNTFjOTg2NzdjZjM1ZmIwNjg1ODFmYjM3MTIxYzQ3MzM2YTYwN2UyMmRlMDUxMDA4YWRhZDEzIiwKICAgICAgIm1ldGFkYXRhIiA6IHsKICAgICAgICAibW9kZWwiIDogInNsaW0iCiAgICAgIH0KICAgIH0KICB9Cn0=", "C4ReNv6V7h+q8WN4tApWjQZaHrWKGw2F9u/9spBSo4EQoZFCbgLMOs83o2sYDlc/a7fHTgZJ28E7aGXmO7HNNBJVTW4cwtFN8wmtP08r5gJgRxMbaHMOKUdjRFMGE2ZLYCOC+54i3Mdd6b6ujYpkR/RItE4hFNRz74+fN24oEr0J/oIWl23VK6gUKmweIwEKsCfEoYdhFArPe5g3Cg1UB4KvL7lAdLKWQeAvWt4OhGqCF//E+hx+tgO0DYQ19lrC1s6pHUBP2sKng1l9bhH+GCWQz1DSR4ljw38clPUl7O3KLrW8kp7zpynUoUOdV95aj/Ckd+GQwDjD66nS9Ng1po07jRh0TQMm8s7VrU4TU7dwzT+dhel+OpUawWsNRiO5RykXnVOeQ7Y+6Z3JB1kBoPia/38PZgKka1HFHXDQ6riv6+5xbPEm1VONIxSpqXsW3Xxsy4vdmaOMPXgW8StobbfmcO+GbHVatGwx+7GdXFVTGZgTU0t2KaqRaQBEev5nrl1cLCcrJJBT6sWyATYS/0C3l15o5hO5tB70Q1g26d1/qYfOpUYE4B+b6KHvXXHAxX/pKaJ/HfTQssTCsJ40rMphTUu5P1JaYNfNIKbQelKWkejSlD8VcdUjKmA8mFM7g0LSHRoouoY7bXwuT9pc8wk/vZ8SS5j9TYC3L4HXegY=");
    public static final Skin DEFAULT_SKIN_TWO = createSkin("ewogICJ0aW1lc3RhbXAiIDogMTYzNDgxOTI4MDc1MywKICAicHJvZmlsZUlkIiA6ICIyMWUzNjdkNzI1Y2Y0ZTNiYjI2OTJjNGEzMDBhNGRlYiIsCiAgInByb2ZpbGVOYW1lIiA6ICJHZXlzZXJNQyIsCiAgInNpZ25hdHVyZVJlcXVpcmVkIiA6IHRydWUsCiAgInRleHR1cmVzIiA6IHsKICAgICJTS0lOIiA6IHsKICAgICAgInVybCIgOiAiaHR0cDovL3RleHR1cmVzLm1pbmVjcmFmdC5uZXQvdGV4dHVyZS80N2MwZjJiODQ0MmRhMGFlNTYxYTI3ODk4NDYxMTM5OTk5ZjU5MWUzODFiM2Q0ODI2ZjM0MzZmYjljYjg0ZGYzIiwKICAgICAgIm1ldGFkYXRhIiA6IHsKICAgICAgICAibW9kZWwiIDogInNsaW0iCiAgICAgIH0KICAgIH0KICB9Cn0=", "CuDFpuFX8dfRFfgSJTrekFkNgVLlAMG7jo6NFTnokfeaE22Fkpslfg18pqDfPv/wfT3lIMksIcwzMJyZOFWxvAVO/+lm/VEft8QchDZA2Ny2yV1VNty1ZUScATZBY8l0pejd/kVP2Uw6PaMiep65ayOknf+HP2E9EyyGwlgUT4AhAm8jH2xs/dKFEfZv8v3t1U8ME116bXDfI6gBllFRKE1ZMtUsFmtK/KAbzBeuTcyNcRMgan43RXCROFdGAbk1xPxYIYUaOa5YodpuTiuTwds2t/4p0Bgsn8/wKgLAkjR7S6OIYpLH0QzoKhbKz9Ir+KpOE7ocrt9/W1TB1Dp7LwWCmCuNY2pNHut00xbFksdGPXWQ3rxZtcWUBCKdwcETlZHMqBEIMxtZgqhR/ijxeAn9g/D3rEnR6+Fzo6cLqDpSJvMmYEs10Ewa/bm1hJ34xrJXHUgy2b4HXq6aP7HuDdNLzKeTkuwr9dwhqVjVKJ4JiDpLKqyJZAG+rerqb9fuyaLjVoOGEQv67dKGe5/iA3DlDbvKwoCqcYot650JbE9Vm9V+ZaIqTnqNCHYl7q9Zet7XjF93jx+rHD2zahJkxIhYYk/xgDhs4X+FD+F+niIK9C4NrXchD0rC8RMvcN4mW3CoEMyOxcbuYM4mgkypAHrmOOQ10bjx+socYsau0Os=");
    public static final Skin DEFAULT_SKIN_THREE = createSkin("ewogICJ0aW1lc3RhbXAiIDogMTYzNTA5ODk4OTc3NSwKICAicHJvZmlsZUlkIiA6ICI2MzMyMDgwZTY3YTI0Y2MxYjE3ZGJhNzZmM2MwMGYxZCIsCiAgInByb2ZpbGVOYW1lIiA6ICJUZWFtSHlkcmEiLAogICJzaWduYXR1cmVSZXF1aXJlZCIgOiB0cnVlLAogICJ0ZXh0dXJlcyIgOiB7CiAgICAiU0tJTiIgOiB7CiAgICAgICJ1cmwiIDogImh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvODA4MmM4YmVlNmU2OTc3ZTBlZTBkYWIzZDBkZDhhNjE0NTUyYTViZTY0NzRkNDAxMDU4Y2NkOTUyYTU0YTI1OCIsCiAgICAgICJtZXRhZGF0YSIgOiB7CiAgICAgICAgIm1vZGVsIiA6ICJzbGltIgogICAgICB9CiAgICB9CiAgfQp9", "amU4OoVDIO5JyTmCf84OKhXrPhbDBubuaoF82D7tpYpwB8CSSxNzoF6L2cydE2M0RjY48x+ANg88BKoLRSYmLMDXZQjub6Ppt6rjCW30ToBNHI9RpWzBwuc7YU3F5axFJTF7upN75Nv1TR0qFxApoGwlouIPmfp6c9xD94MdX/eCrB62M752j/GqH585TR5VHWQU+S9QKmuSvgKnRT8tS8qOgvlQ35qnNL9485Q1P84habXFFAJWr4hy1oxk73cdQsiSsBIJVFj/jnElyI458srHkGA7X0lJVl0HSkBi0HmJW1jCnTowjPJTJ51HTjahBNuHFL0k0cpZ/IWysQGaiF84lzjs7Qadalgxuv9gxK7CCgsuAOyLecsQVgv1FDRE5MqogCZ5N7YleQJkj1qDx56+VWa8n/d8+IkBoqbeDjyiYTXvjAsgf7EVH7HlDyv2/EAXGOv9rQcdn3JemaOCWjA8U0b/8tjtL+bt2VCA66PL2AA74xJMsw5d3Sl9Mv3tMxpBvnjYxh/bOwJfpscgUu2Z8KWgKPfuCXJUXFyD7ExjKJbj9tdIsmtolZJkW/ETnzY5MrMZI8FDXal5C/wXwr2nWDLsjEyBgHlCm6Y2RMO6vM4fE4uE+J2GcDgmUxRML+bl04jFKiM6+VSinQMikBAILKChUCMqgIirhXEEZ2Q=");

    public static final Skin SKIN_SHOP_GAME = createSkin("eyJ0aW1lc3RhbXAiOjE1MDc0ODMyMDU5OTAsInByb2ZpbGVJZCI6ImMxZWQ5N2Q0ZDE2NzQyYzI5OGI1ODFiZmRiODhhMjFmIiwicHJvZmlsZU5hbWUiOiJ5b2xvX21hdGlzIiwic2lnbmF0dXJlUmVxdWlyZWQiOnRydWUsInRleHR1cmVzIjp7IlNLSU4iOnsidXJsIjoiaHR0cDovL3RleHR1cmVzLm1pbmVjcmFmdC5uZXQvdGV4dHVyZS9lMmRkMjM3M2FiYjE1YjQzNDJlOGUxNDA4ODk0ZDNjMjZkMmI0ODZiMGE3Mzk1M2I3YzBhZjk5NTM4OWJkNjMifX19", "bZokupLMIRLLo1Nx7JvnTwZskBz1ONVYCOS76X4rQPj+VLl4ZXYzPCKmK23L2rZ5LDArWzJxS0yLTh/zXkC4WF4BjlvNgr05JJ6bQ/LST+3V0JET676vz2FfDc0mv2tnHtatjqahi7U7Eq8exBPnPenDKrbAOvvKoJ/aS8WZqiWqjhCgum1kvrlclUU/KtZo5IlnkWQLK9at4n46GgqFYYfMNOE6v1oMAwrj1XpZv+7aotl+oNgKoZ3G7AVXgBgf1BS4X7PQY1nJTYMdPrQN2ZfHqx5bwKkNwdxYCXtERrb43zARPuAkR6x1Bj40Pn0YJ8TUhp9DlYzcOxNIiCdhvxk9UMmE8A0EjbUFFevsKkKovJ+aSzEhGzTSNKbV2zGsplm79qgz0+FbhUHAsr2L7C8Lca7rkR1CJzMAY/rCxjkzourCiA8Cwu04c78gM7azxu8YI+Ab2sjM7Y4lCKt1/ObkFF3cYCg8OCWvnJe6zaD9iWmxSQKpaGcy5QKbt/F8bXqEvbldeKpdnWsGRYEmH3Rh9aKy01ogcC3cB/Z4wezB1797DgcrVhz/Kbl3Z2PB/QgEou6Rcq3DQFUJSaU1SoMW+vkD9YicbZ29mGECPmIMw0KrvCIvhSu9Tdm5uLpmHwxQyOsWk4Ks7IavwpVOcwCvDHtjUxGlgReJic7KYkU=");

    private final String skinName;
    private final String value;
    private final String signature;
    private final SkinType skinType;
    private final long updateTime;

    public Skin(@NotNull String skinName, @NotNull String value, @NotNull String signature, @NotNull SkinType skinType) {
        this(skinName, value, signature, skinType, 0);
    }

    public boolean isExpired() {
        return updateTime != 0 && System.currentTimeMillis() > updateTime + TimeUnit.HOURS.toMillis(24);
    }

    public String convertToString() {
        return skinName + "@" + value + "@" + signature + "@" + skinType.getTypeId() + "@" + updateTime;
    }

    @Nullable
    public static Skin fromString(String string) {
        String[] split = string.split("@");
        if (split.length != 5) {
            return null;
        }
        try {
            return new Skin(split[0], split[1], split[2], SkinType.getSkinType(Integer.parseInt(split[3])), Long.parseLong(split[4]));
        }
        catch (Exception e) {
            return null;
        }
    }

    public static Skin createSkin(@NotNull String value, @NotNull String signature) {
        return new Skin("Стандартный", value, signature, SkinType.CUSTOM);
    }
}
